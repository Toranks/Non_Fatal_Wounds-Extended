#textdomain wesnoth-Non_Fatal_Wounds
#define NFWME_short_term_memory_loss_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[effect]
			apply_to=experience
			set=0
		[/effect]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Memory Loss" {NFWME_COLOR_RED}}
#enddef

#define NFWME_broken_arm_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=broken_arm
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=broken_arm_display
						name="<span color='#DA0000'>"+_"broken arm"+"</span>"
						description=_"Non-magical damage -20%"
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=attack
				[not]
					special_id=magical
				[/not]
				increase_damage=-20%
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_broken_arm_Healing
						description=_ "Recover from broken arm."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=broken_arm_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Broken Arm" {NFWME_COLOR_RED}}
#enddef

#define NFWME_broken_wind_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=broken_wind
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=broken_wind_display
						name="<span color='#DA0000'>"+_"broken wind"+"</span>"
						description=_"Movement points -20%"
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=movement
				increase=-20%
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_broken_wind_Healing
						description=_ "Recover from broken wind."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=broken_wind_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Broken Wind" {NFWME_COLOR_RED}}
#enddef

#define NFWME_broken_leg_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=broken_leg
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=broken_leg_display
						name="<span color='#DA0000'>"+_"broken leg"+"</span>"
						description=_"Movement points -20%"
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=movement
				increase=-20%
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_broken_leg_Healing
						description=_ "Recover from broken leg."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=broken_leg_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Broken Leg" {NFWME_COLOR_RED}}
#enddef

#define NFWME_broken_rib_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=broken_rib
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=broken_Rib_display
						name="<span color='#DA0000'>"+_"broken rib"+"</span>"
						description=_"Impact resistance -30%"
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=resistance
				replace=no
				[resistance]
					impact=30
				[/resistance]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_broken_rib_Healing
						description= _"Recover from broken rib."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=broken_rib_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Broken Rib" {NFWME_COLOR_RED}}
#enddef

#define NFWME_burned_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=burned
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=burned_display
						name="<span color='#DA0000'>"+_"burned"+"</span>"
						description=_"Fire resistance -30%"
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=resistance
				replace=no
				[resistance]
					fire=30
				[/resistance]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_burned_Healing
						description= _"Recover from burned."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=burned_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Burned" {NFWME_COLOR_RED}}
#enddef

#define NFWME_captured_WOUND
   [modify_unit]
		[filter]
			{EVENT_UNIT}
			[filter_side]
				controller=human
			[/filter_side]
		[/filter]	
		[object]
			id=captured_unit
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=captured_unit_display
						name="<span color='#DA0000'>"+_"captured"+"</span>"
						description=_"Captured units have a increased recall cost untill you recall them once (recall+(10xlevel))."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=recall_cost
				times="per level"
				increase=10
			[/effect]
		[/object]
		
   [/modify_unit]
   {NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Captured" {NFWME_COLOR_RED}}
#enddef

#define NFWME_concussion_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=concussion
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=concussion_display
						name="<span color='#DA0000'>"+_"concussion"+"</span>"
						description=_"Magical damage -25%"
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=attack
				special_id=magical
				increase_damage=-25%
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_concussion_Healing
						description= _"Recover from concussion."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=concussion_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Concussion" {NFWME_COLOR_RED}}
#enddef

#define NFWME_Coward_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=coward
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=coward_display
						name="<span color='#DA0000'>"+_"coward"+"</span>"
						description=_"Accuracy -15%
Redeem yourself by defeating an opponent with at least 1 level higher than you or at his higher level."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=attack
				increase_accuracy=-15
			[/effect]

		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Coward" {NFWME_COLOR_RED}}
#enddef

#define NFWME_dead_WOUND

	#causes lua error when sides other than side 1 get it
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[trait]
			id=nfwme_dead
			male_name="<span color='#DA0000'>"+_"dead"+"</span>"
			female_name="<span color='#DA0000'>"+_"female^dead"+"</span>"
		[/trait]
	[/modify_unit]

	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Dead" {NFWME_COLOR_RED}}
    
#enddef

#define NFWME_plagued_WOUND

	[modify_unit]
		{FILTER_EVENT_UNIT}
		[trait]
			id=nfwme_plagued
			male_name="<span color='#DA0000'>"+_"plagued"+"</span>"
			female_name="<span color='#DA0000'>"+_"female^plagued"+"</span>"
		[/trait]
	[/modify_unit]

	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Lost" {NFWME_COLOR_RED}}
    
#enddef

#define NFWME_fear_of_weapon_WOUND
#textdomain wesnoth-units
	[set_variable]
		name=nfwme_translated_scary_weapon
		value="$second_weapon.description"
	[/set_variable]
#textdomain wesnoth-Non_Fatal_Wounds
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=fear_of_weapon
			[effect]
				apply_to=attack
				[set_specials]
					mode=append
					[attacks]
						name="<span color='#DA0000'>"+_"weakness"+"</span>"
						description=_"-1 strikes when facing an enemy with $second_weapon.description|.
Face your fears and defeat them to try to overcome them."
						id=nfwme_scared_of_weapon
						[filter_opponent]
							[filter_weapon]
								name=$nfwme_rand_scary_weapon
							[/filter_weapon]
						[/filter_opponent]
						sub=1
					[/attacks]
				[/set_specials]
			[/effect]
		[/object]
		[set_variable]
			name=unit.variables.scary_weapon
			to_variable=nfwme_rand_scary_weapon
		[/set_variable]
		[set_variable]
			name=unit.variables.scary_weapon_translated
			to_variable=second_weapon.description
		[/set_variable]
	[/modify_unit]
	
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Scared of $second_weapon.description" {NFWME_COLOR_RED}}
#enddef

#define NFWME_fear_of_water_WOUND
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=fear_of_water
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=fear_of_water_display
						name="<span color='#DA0000'>"+_"aquaphobia"+"</span>"
						description=_"Scared of water. Movement points -1 on aquatic terrains, -2 on deep waters.
Face your fears to try to overcome them."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=movement_costs
				[movement_costs]
					reef=1
					deep_water=2
					shallow_water=1
					swamp_water=1
				[/movement_costs]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Aquaphobia" {NFWME_COLOR_RED}}
#enddef

#define NFWME_fear_of_hight_WOUND
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=fear_of_hight
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=fear_of_hight_display
						name="<span color='#DA0000'>"+_"acrophobia"+"</span>"
						description=_"Scared of hights. Movement points -1 on hills terrains, -2 on mountains.
Face your fears to try to overcome them."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=movement_costs
				[movement_costs]
					mountains=2
					hills=1
				[/movement_costs]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Acrophobia" {NFWME_COLOR_RED}}
#enddef

#define NFWME_fear_of_desert_WOUND
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=fear_of_desert
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=fear_of_desert_display
						name="<span color='#DA0000'>"+_"erimophobia"+"</span>"
						description=_"Scared of deserts. Movement points -2 on frozen and sand terrains.
Face your fears to try to overcome them."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=movement_costs
				[movement_costs]
					frozen=2
					sand=2
				[/movement_costs]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Erimophobia" {NFWME_COLOR_RED}}
#enddef

#define NFWME_fear_of_cave_WOUND
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=fear_of_cave
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=fear_of_cave_display
						name="<span color='#DA0000'>"+_"claustrophobia"+"</span>"
						description=_"Scared of tight spaces. Movement points -2 on cave terrains.
Face your fears to try to overcome them."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=movement_costs
				[movement_costs]
					cave=2
				[/movement_costs]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Claustrophobia" {NFWME_COLOR_RED}}
#enddef


#define NFWME_fear_of_plant_WOUND
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=fear_of_plant
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=fear_of_plant_display
						name="<span color='#DA0000'>"+_"dendrophobia"+"</span>"
						description=_"Scared of plants. Movement points -2 on forest and fungus terrains.
Face your fears to try to overcome them."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=movement_costs
				[movement_costs]
					forest=2
					fungus=2
				[/movement_costs]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Dendrophobia" {NFWME_COLOR_RED}}
#enddef


#define NFWME_fear_of_open_WOUND
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=fear_of_open
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=fear_of_open_display
						name="<span color='#DA0000'>"+_"agoraphobia"+"</span>"
						description=_"Scared of open spaces. Movement points -2 on flat terrains.
Face your fears to try to overcome them."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=movement_costs
				[movement_costs]
					flat=2
				[/movement_costs]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Agoraphobia" {NFWME_COLOR_RED}}
#enddef


#define NFWME_fear_of_dark_WOUND
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=fear_of_dark
			[effect]
				apply_to=new_ability
				[abilities]
					[attacks]
						name="<span color='#DA0000'>"+_"nyctophobia"+"</span>"
						description=_"-1 strikes in the dark.
Face your fears to try to overcome them."
						id=nfwme_scared_of_dark
						affect_self=yes
						[filter]
							[filter_location]
								time_of_day_id=first_watch,second_watch,midnight,underground,deep_underground
							[/filter_location]
						[/filter]
						sub=1
					[/attacks]
				[/abilities]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Scared of the dark" {NFWME_COLOR_RED}}
#enddef

#define NFWME_fear_of_light_WOUND
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=fear_of_light
			[effect]
				apply_to=new_ability
				[abilities]
					[attacks]
						name="<span color='#DA0000'>"+_"photophobia"+"</span>"
						description=_"-1 strikes in the light.
Face your fears to try and overcome them."
						id=nfwme_scared_of_light
						affect_self=yes
						[filter]
							[filter_location]
								time_of_day_id=morning,afternoon,midday
							[/filter_location]
						[/filter]
						sub=1
					[/attacks]
				[/abilities]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Scared of the light" {NFWME_COLOR_RED}}
#enddef

#define NFWME_frostbite_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=frostbite
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=frostbite_display
						name="<span color='#DA0000'>"+_"frostbite"+"</span>"
						description=_"Cold resistance -30%."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=resistance
				replace=no
				[resistance]
					cold=30
				[/resistance]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_frostbite_Healing
						description= _"Recover from frostbite."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=frostbite_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Frostbite" {NFWME_COLOR_RED}}
#enddef

#define NFWME_gash_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=gash
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=gash_display
						name="<span color='#DA0000'>"+_"gash"+"</span>"
						description=_"Blade resistance -30%."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=resistance
				replace=no
				[resistance]
					blade=30
				[/resistance]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_gash_Healing
						description= _"Recover from gash."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=gash_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Gash" {NFWME_COLOR_RED}}
#enddef

#define NFWME_infection_WOUND
   [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=infection
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=infection_display
						name="<span color='#DA0000'>"+_"infection"+"</span>"
						description=_"10% chance of being poisoned every turn."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_infectiont_Healing
						description= _"Recover from infection."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=infection_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
		
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Infection" {NFWME_COLOR_RED}}
#enddef

#define NFWME_insane_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=insanity
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=insanity_display
						name="<span color='#DA0000'>"+_"insanity"+"</span>"
						description=_"Melee attacks gain berserk."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=attack
				range=melee
				[set_specials]
					mode=append
					[berserk]
						id=nfwme_berserk
						name= _ "berserk"
						description= _ "Whether used offensively or defensively, this attack presses the engagement until one of the combatants is slain, or 30 rounds of attacks have occurred."
						special_note={INTERNAL:SPECIAL_NOTES_BERSERK}
						value=30
					[/berserk]
				[/set_specials]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_insane_Healing
						description= _"Recover from insanity."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=insane_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Insanity" {NFWME_COLOR_RED}}
#enddef

#define NFWME_maimed_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=maimed
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=maimed_display
						name="<span color='#DA0000'>"+_"maimed"+"</span>"
						description=_"-20% HP"
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_maimed_Healing
						description= _"Recover from maimed."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=maimed_display_healing
								[/display]
							[/abilities]
						[/effect]
						[effect]
							apply_to=hitpoints
							heal_full=yes
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Maimed" {NFWME_COLOR_RED}}
#enddef

#define NFWME_necrosis_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=necrosis
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=necrosis_display
						name="<span color='#DA0000'>"+_"necrosis"+"</span>"
						description=_"You are closer to undeath.
Arcane resistance -30%"
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=resistance
				replace=no
				[resistance]
					arcane=30
				[/resistance]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_neccrosis_Healing
						description= _"Recover from necrosis."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=necrosis_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Necrosis" {NFWME_COLOR_RED}}
#enddef

#define NFWME_paper_cut_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=paper_cut
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=paper_cut_display
						name="<span color='#DA0000'>"+_"paper cut"+"</span>"
						description=_"Due to the intense pain from your cut you cant concentrait on the fight.

All damage is reduced by 20% and blade resistance is lowered by 30%. You will never recover from this."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=resistance
				replace=no
				[resistance]
					blade=30
				[/resistance]
			[/effect]
			[effect]
				apply_to=attack
				increase_damage=-20%
			[/effect]
			## [effect]
				## apply_to=new_advancement
					## [advancement]
						## id=NFWME_paper_cut_Healing
						## description= _"Recover from Paper Cut."
						## [effect]
							## apply_to=new_ability
							## [abilities]
								## [display]
									## id=paper_cut_display_healing
								## [/display]
							## [/abilities]
						## [/effect]
						## [effect]
							## apply_to=hitpoints
							## heal_full=yes
						## [/effect]
					## [/advancement]
			## [/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Paper Cut" {NFWME_COLOR_RED}}
#enddef

#define NFWME_amnesia_WOUND
	[modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=amnesia
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=amnesia_dummy
						name="<span color='#DA0000'>"+_"amnesia"+"</span>"
						description=_"Every round you lose 2 exp."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_amnesia_Healing
						description= _"Recover from Amnesia."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=amnesia_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Amnesia" {NFWME_COLOR_RED}}
#enddef

#define NFWME_sick_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=sick
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=sick_display
						name="<span color='#DA0000'>"+_"sick"+"</span>"
						description=_"20% chance of being slowed every turn."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_sick_Healing
						description= _"Recover from sick."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=sick_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
		
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Sick" {NFWME_COLOR_RED}}
#enddef

#define NFWME_stepped_on_lego_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=lego
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=lego_display
						name="<span color='#DA0000'>"+_"lego"+"</span>"
						description=_"Due to the intense pain of stepping on plastic brick you cant walk properly.

Movement is reduced by 20% and accuracy is reduced by 15%. You will never recover from this."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=attack
				increase_accuracy=-15
			[/effect]
			[effect]
				apply_to=movement
				increase=-20%
			[/effect]
			## [effect]
				## apply_to=new_advancement
					## [advancement]
						## id=NFWME_legot_Healing
						## description= _"Recover from stepping on lego."
						## [effect]
							## apply_to=new_ability
							## [abilities]
								## [display]
									## id=lego_display_healing
								## [/display]
							## [/abilities]
						## [/effect]
						## [effect]
							## apply_to=hitpoints
							## heal_full=yes
						## [/effect]
					## [/advancement]
			## [/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Stepped on Lego" {NFWME_COLOR_RED}}
#enddef

#define NFWME_undead_ghost_WOUND
    [modify_unit]
		{FILTER_EVENT_UNIT}
		
		{TRAIT_UNDEAD}
		[trait]
			id=ghost_trait
			[effect]
				apply_to=image_mod
				replace=~O(60%)~GS( )~B(100)
			[/effect]
			
			
			[effect]
				apply_to=alignment
				set=chaotic
			[/effect]
			
			
			#movement costs
			[effect]
				apply_to=movement_costs
				replace=yes
				[movement_costs]
					deep_water=2
					shallow_water=2
					reef=2
					swamp_water=1
					flat=1
					sand=1
					forest=1
					hills=1
					mountains=1
					village=1
					castle=1
					cave=1
					frozen=1
					unwalkable=1
					fungus=1
				[/movement_costs]
			[/effect]
			
			#defense
			[effect]
				apply_to=defense
				replace=yes
				[defense]
					{FLY_DEFENSE 50}
					cave=50
					fungus=50
				[/defense]
			[/effect]
			
			#resistance
			[effect]
				apply_to=resistance
				replace=yes
				[resistance]
					blade=50
					pierce=50
					impact=50
					fire=90
					cold=30
					arcane=110
				[/resistance]
			[/effect]
			
			#melee attacks
			[effect]
				apply_to=attack
				range=melee
				[not]
					special_id=magical
				[/not]
				[not]
					type=cold,fire
				[/not]
				set_type=arcane
				set_description=_"spectral "+$unit.attack[0].name
				set_icon=$unit.attack[0].icon
				[set_specials]
					mode=append
					[drains]
						id=drains
						name= _ "drains"
						description= _ "This unit drains health from living units, healing itself for half the amount of damage it deals (rounded down)."
						special_note={INTERNAL:SPECIAL_NOTES_DRAIN}
					[/drains]
				[/set_specials]
			[/effect]
			
			#range attacks
			[effect]
				apply_to=attack
				range=ranged
				[not]
					special_id=magical
				[/not]
				[not]
					type=arcane,fire
				[/not]
				set_type=cold
				set_description=_"spectral "+$unit.attack[$($unit.attack.length - 1)].name
				set_icon=$unit.attack[$($unit.attack.length - 1)].icon
			[/effect]
		[/trait]
	[/modify_unit]
	
	[modify_unit]
		[filter]
			x=$x1
			y=$y1
			level=2,3,4
		[/filter]
		[effect]
			apply_to=new_advancement
			{AMLA_DEFAULT}
		[/effect]
	[/modify_unit]

	[store_unit]
		[filter]
			{EVENT_UNIT}
			level=2,3,4
		[/filter]
		mode=replace
		variable=nfwme_ghost_advancment
		kill=no
	[/store_unit]

	[set_variable]
		name=nfwme_ghost_advancment.advances_to
		value="null"
	[/set_variable]

	[unstore_unit]
		variable=nfwme_ghost_advancment
		{EVENT_UNIT}
	[/unstore_unit]
	{CLEAR_VARIABLE nfwme_ghost_advancment}
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Ghost" {NFWME_COLOR_RED}}
#enddef

#define NFWME_undead_corpse_WOUND
	[set_variable]
		name=zombie_swimming
		min=$unit.movement_costs.deep_water, 4
	[/set_variable]
    [modify_unit]
		{FILTER_EVENT_UNIT}
		
		{TRAIT_UNDEAD}
		{TRAIT_FEARLESS_MUSTHAVE}
		[trait]
			id=nfwme_corpse
			[effect]
				apply_to=image_mod
				replace=~O(30%)~GS( )
			[/effect]
			[effect]
				apply_to=overlay
				add=units/undead/soulless.png~RC(magenta>red)
			[/effect]
			
			#movement
			[effect]
				apply_to=movement_costs
				replace=yes
				[movement_costs]
					deep_water=$zombie_swimming
				[/movement_costs]
			[/effect]
			[effect]
				apply_to=movement
				increase=-25%
			[/effect]
			#resistance
			[effect]
				apply_to=resistance
				replace=yes
				[resistance]
					arcane=140 
				[/resistance]
			[/effect]
			
			[effect]
				apply_to=alignment
				set=chaotic
			[/effect]
			
			#melee attacks
			[effect]
				apply_to=attack
				range=melee
				[set_specials]
					mode=append
					 [plague]
						id=plague
						name= _ "plague"
						description= _ "When a unit is killed by a Plague attack, that unit is replaced with a Walking Corpse on the same side as the unit with the Plague attack. This doesn’t work on Undead or units in villages."
						special_note={INTERNAL:SPECIAL_NOTES_PLAGUE}
						type=Walking Corpse
					[/plague]
				[/set_specials]
			[/effect]
			#magical debuff
			[effect]
				apply_to=attack
				range=ranged
				special_id=magical
				increase_attacks=-50%
			[/effect]
			#marksman debuff
			[effect]
				apply_to=attack
				range=ranged
				special_id=marksman
				[set_specials]
					[chance_to_hit]
						id=marksman
						name= _ "poor marksmanship"
						description= _ "When used offensively, this attack always has at least a 50% chance to hit."
						value=50
						cumulative=yes
						active_on=offense
					[/chance_to_hit]
				[/set_specials]
			[/effect]
			#ranged damage
			[effect]
				apply_to=attack
				range=ranged
				increase_damage=-25%
			[/effect]
		[/trait]
	[/modify_unit]
	
	
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Zombie" {NFWME_COLOR_RED}}
#enddef

#define NFWME_wild_magic_WOUND
     [modify_unit]
		{FILTER_EVENT_UNIT}
		[object]
			id=wild_magic
			[effect]
				apply_to=new_ability
				[abilities]
					[display]
						id=wild_magic_display
						name="<span color='#DA0000'>"+_"wild magic"+"</span>"
						description=_"Magical attacks have a 50% chance to hit."
					[/display]
				[/abilities]
			[/effect]
			[effect]
				apply_to=attack
				special_id=magical
				[set_specials]
					mode=append
					[chance_to_hit]
						id=magical
						name= _ "wild magic"
						description= _ "This attack always has a 50% chance to hit regardless of the defensive ability of the unit being attacked."
						value=50
						cumulative=no
					[/chance_to_hit]
				[/set_specials]
			[/effect]
			[effect]
				apply_to=new_advancement
					[advancement]
						id=NFWME_wild_magic_Healing
						description= _"Recover from Wild Magic."
						[effect]
							apply_to=new_ability
							[abilities]
								[display]
									id=wild_magic_display_healing
								[/display]
							[/abilities]
						[/effect]
					[/advancement]
			[/effect]
		[/object]
	[/modify_unit]
	{NFWME_FLOAT_TEXT_CURRENT_SIDE_UNIT _"Wild Magic" {NFWME_COLOR_RED}}
#enddef